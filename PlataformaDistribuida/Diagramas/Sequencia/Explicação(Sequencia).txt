Diagrama de Sequência

O diagrama de sequência mostra o fluxo de mensagens que acontecem entre os componentes, ou seja, o passo a passo de como o sistema realmente funciona. Primeiro, o cliente se autentica no orquestrador principal e recebe um token. Depois disso, ele envia a tarefa junto com esse token. O orquestrador principal salva essa tarefa no estado global e envia a informação também para o orquestrador de backup, mantendo os dois sincronizados. Em seguida, o orquestrador principal escolhe um worker (de acordo com a política de balanceamento que foi definida) e envia a tarefa para execução. O worker confirma que recebeu, continua mandando heartbeats de tempos em tempos, e quando termina a execução, devolve o resultado para o orquestrador principal, que atualiza o estado e repassa a resposta para o cliente.

Nesse diagrama também aparecem os cenários de falha. Se um worker parar de responder, o orquestrador principal percebe pela ausência de heartbeat, marca esse worker como inativo e redistribui as tarefas dele para outro worker disponível. Já no caso do orquestrador principal falhar, o backup detecta a falta de comunicação, assume o papel de principal e continua o funcionamento sem que o cliente perca as informações das tarefas. Esse diagrama é importante porque mostra não só o funcionamento normal, mas também como o sistema reage em situações de erro.